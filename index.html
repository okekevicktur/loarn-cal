<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mortage Loan</title>
    <link rel="stylesheet" href="my.css" />
  </head>
  <body>
    <div class="container">
      <div class="calculator">
        <div class="formArea">
          <div class="header">
            <h3>Mortage calculator</h3>
            <p>Clear All</p>
          </div>

          <p>Mortage Amount</p>
          <div class="amoutinput">
            <p>€</p>
            <input type="number" name="" id="amount" />
          </div>

          <div class="cont2">
            <div class="secondInput">
              <p>Mortage Term</p>
              <div class="secinput">
                <input type="number" name="" id="year" />
                <p>year</p>
              </div>
            </div>
            <div class="secondInput">
              <p>Interest Rate</p>
              <div class="secinput">
                <input type="number" name="" id="rate" />
                <p>%</p>
              </div>
            </div>
          </div>

          <div class="cont3">
            <div class="repayment">
              <input type="radio" name="mortage" id="" value="totalRepayment" />
              <p><strong>Repayment</strong></p>
            </div>
            <div class="repayment">
              <input type="radio" name="mortage" id="" value="interest" />
              <p><strong>Repayment</strong></p>
            </div>
          </div>

          <button onclick="calculate()">Calculate Repayments</button>
        </div>
        <div class="result">
          <img src="/assets/images/illustration-empty.svg" alt="" />
          <h1 id="totalRepay">Result shows here</h1>
          <p id="interestRepay">
            Complete the form and click “calculate repayments” to see what your
            monthly repayments would be.
          </p>
        </div>
      </div>
    </div>
    <script>
      const amt = document.getElementById("amount")?.value;
      const duration = document.getElementById("year")?.value;
      const rate = document.getElementById("rate")?.value;
      const selectedValue = document.querySelector(
        'input[type="radio"][name="mortage"]:checked'
      )?.value;

      function validateUserInput(amount, year, interest, selectOption) {
        if (amount && year && interest && selectOption) {
          calc(selectOption, amount, year, interest);
        } else {
          console.log(amount + " " + interest, year);
          window.alert("Please make sure to fill all fields");
          return;
        }
      }

      function calc(selectOption, amount, year, interest) {
        validateUserInput(amount, year, interest, selectOption);
        if (selectOption == "totalRepayment") {
          document.getElementById("totalRepay").innerHTML = calculateMortgage(
            amount,
            interest,
            year
          );
        } else {
          document.getElementById("interestRepay").innerHTML = 3 - 2;
        }
      }

      function calculateMortgage(P, i, n) {
        // Convert annual interest rate to monthly
        i = i / 100 / 12;

        // Calculate monthly payment
        let M = (P * (i * Math.pow(1 + i, n))) / (Math.pow(1 + i, n) - 1);

        return M;
      }

      function calculate() {
        calc(selectedValue, amt, duration, rate);
      }
    </script>
  </body>
</html>
